{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { auth, createUserProfileDocument } from \"./firebase.utils\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { onSnapshot } from \"firebase/firestore\";\nexport const useGoogleUser = () => {\n  _s();\n\n  const [currentUser, setCurrentUser] = useState({\n    id: 0\n  });\n  useEffect(() => {\n    const unsubscribeFromAuth = onAuthStateChanged(auth, async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth); // Now calls `onSnapshot` as a function; DocumentReference passed as first argument\n        // and callback function is now the second argument\n\n        onSnapshot(userRef, snapshot => {\n          setCurrentUser({\n            id: snapshot.id,\n            ...snapshot.data()\n          });\n        });\n        console.log(currentUser);\n      } // user is not signed in, so userAuth will be null\n      else {\n          setCurrentUser(null);\n        }\n    });\n    return () => {\n      unsubscribeFromAuth();\n    };\n  }, [currentUser.id]);\n  return currentUser;\n};\n\n_s(useGoogleUser, \"S13b1y/rejoEnCSzuBondBmXvkY=\");","map":{"version":3,"sources":["/Users/mert/Desktop/Side Projects/ecommerce-app/src/firebase/custom-hooks.js"],"names":["useState","useEffect","auth","createUserProfileDocument","onAuthStateChanged","onSnapshot","useGoogleUser","currentUser","setCurrentUser","id","unsubscribeFromAuth","userAuth","userRef","snapshot","data","console","log"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,IAAT,EAAeC,yBAAf,QAAgD,kBAAhD;AACA,SAASC,kBAAT,QAAmC,eAAnC;AACA,SAASC,UAAT,QAA2B,oBAA3B;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAAA;;AACjC,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCR,QAAQ,CAAC;AAAES,IAAAA,EAAE,EAAE;AAAN,GAAD,CAA9C;AAEAR,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,mBAAmB,GAAGN,kBAAkB,CAACF,IAAD,EAAO,MAAOS,QAAP,IAAoB;AACvE,UAAIA,QAAJ,EAAc;AACZ,cAAMC,OAAO,GAAG,MAAMT,yBAAyB,CAACQ,QAAD,CAA/C,CADY,CAEZ;AACA;;AACAN,QAAAA,UAAU,CAACO,OAAD,EAAWC,QAAD,IAAc;AAChCL,UAAAA,cAAc,CAAC;AACbC,YAAAA,EAAE,EAAEI,QAAQ,CAACJ,EADA;AAEb,eAAGI,QAAQ,CAACC,IAAT;AAFU,WAAD,CAAd;AAID,SALS,CAAV;AAMAC,QAAAA,OAAO,CAACC,GAAR,CAAYT,WAAZ;AACD,OAXD,CAYA;AAZA,WAaK;AACHC,UAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF,KAjB6C,CAA9C;AAmBA,WAAO,MAAM;AACXE,MAAAA,mBAAmB;AACpB,KAFD;AAGD,GAvBQ,EAuBN,CAACH,WAAW,CAACE,EAAb,CAvBM,CAAT;AAyBA,SAAOF,WAAP;AACD,CA7BM;;GAAMD,a","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { auth, createUserProfileDocument } from \"./firebase.utils\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { onSnapshot } from \"firebase/firestore\";\n\nexport const useGoogleUser = () => {\n  const [currentUser, setCurrentUser] = useState({ id: 0 });\n\n  useEffect(() => {\n    const unsubscribeFromAuth = onAuthStateChanged(auth, async (userAuth) => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        // Now calls `onSnapshot` as a function; DocumentReference passed as first argument\n        // and callback function is now the second argument\n        onSnapshot(userRef, (snapshot) => {\n          setCurrentUser({\n            id: snapshot.id,\n            ...snapshot.data(),\n          });\n        });\n        console.log(currentUser);\n      }\n      // user is not signed in, so userAuth will be null\n      else {\n        setCurrentUser(null);\n      }\n    });\n\n    return () => {\n      unsubscribeFromAuth();\n    };\n  }, [currentUser.id]);\n\n  return currentUser;\n};\n"]},"metadata":{},"sourceType":"module"}