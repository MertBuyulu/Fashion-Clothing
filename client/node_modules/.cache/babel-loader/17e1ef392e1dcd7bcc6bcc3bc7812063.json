{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\"; // firebase related imports\n\nimport { auth, createUserProfileDocument } from \"./firebase.utils\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { onSnapshot } from \"firebase/firestore\";\nexport const useGoogleUser = () => {\n  _s();\n\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  useEffect(() => {\n    const unsubscribeFromAuth = onAuthStateChanged(auth, async userAuth => {\n      console.log(userAuth);\n\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        console.log(userRef); // Now calls `onSnapshot` as a function; DocumentReference passed as first argument\n        // and callback function is now the second argument\n\n        const unsubscribeFromSnapshot = onSnapshot(userRef, snapShot => {\n          setCurrentUser(snapShot.id);\n          setUserData(...snapShot.data());\n        });\n        console.log(unsubscribeFromSnapshot); // detach the listener\n\n        unsubscribeFromSnapshot();\n      } // user is not signed in, so userAuth will be null\n      else {\n          setCurrentUser(null);\n          setUserData(null);\n        }\n    });\n    return () => {\n      unsubscribeFromAuth();\n    };\n  });\n  console.log(currentUser);\n  console.log(userData);\n  return {\n    userData,\n    currentUser\n  };\n};\n\n_s(useGoogleUser, \"SIdi9JYVrX4q658hn6gpByug9Fg=\");","map":{"version":3,"sources":["/Users/mert/Desktop/Side Projects/ecommerce-app/src/firebase/custom-hooks.js"],"names":["useState","useEffect","auth","createUserProfileDocument","onAuthStateChanged","onSnapshot","useGoogleUser","currentUser","setCurrentUser","userData","setUserData","unsubscribeFromAuth","userAuth","console","log","userRef","unsubscribeFromSnapshot","snapShot","id","data"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC,C,CACA;;AACA,SAASC,IAAT,EAAeC,yBAAf,QAAgD,kBAAhD;AACA,SAASC,kBAAT,QAAmC,eAAnC;AACA,SAASC,UAAT,QAA2B,oBAA3B;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAAA;;AACjC,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCR,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,IAAD,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMU,mBAAmB,GAAGP,kBAAkB,CAACF,IAAD,EAAO,MAAOU,QAAP,IAAoB;AACvEC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,UAAIA,QAAJ,EAAc;AACZ,cAAMG,OAAO,GAAG,MAAMZ,yBAAyB,CAACS,QAAD,CAA/C;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ,EAFY,CAGZ;AACA;;AACA,cAAMC,uBAAuB,GAAGX,UAAU,CAACU,OAAD,EAAWE,QAAD,IAAc;AAChET,UAAAA,cAAc,CAACS,QAAQ,CAACC,EAAV,CAAd;AACAR,UAAAA,WAAW,CAAC,GAAGO,QAAQ,CAACE,IAAT,EAAJ,CAAX;AACD,SAHyC,CAA1C;AAIAN,QAAAA,OAAO,CAACC,GAAR,CAAYE,uBAAZ,EATY,CAUZ;;AACAA,QAAAA,uBAAuB;AACxB,OAZD,CAaA;AAbA,WAcK;AACHR,UAAAA,cAAc,CAAC,IAAD,CAAd;AACAE,UAAAA,WAAW,CAAC,IAAD,CAAX;AACD;AACF,KApB6C,CAA9C;AAsBA,WAAO,MAAM;AACXC,MAAAA,mBAAmB;AACpB,KAFD;AAGD,GA1BQ,CAAT;AA2BAE,EAAAA,OAAO,CAACC,GAAR,CAAYP,WAAZ;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACA,SAAO;AAAEA,IAAAA,QAAF;AAAYF,IAAAA;AAAZ,GAAP;AACD,CAlCM;;GAAMD,a","sourcesContent":["import { useState, useEffect } from \"react\";\n// firebase related imports\nimport { auth, createUserProfileDocument } from \"./firebase.utils\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { onSnapshot } from \"firebase/firestore\";\n\nexport const useGoogleUser = () => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n\n  useEffect(() => {\n    const unsubscribeFromAuth = onAuthStateChanged(auth, async (userAuth) => {\n      console.log(userAuth);\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        console.log(userRef);\n        // Now calls `onSnapshot` as a function; DocumentReference passed as first argument\n        // and callback function is now the second argument\n        const unsubscribeFromSnapshot = onSnapshot(userRef, (snapShot) => {\n          setCurrentUser(snapShot.id);\n          setUserData(...snapShot.data());\n        });\n        console.log(unsubscribeFromSnapshot);\n        // detach the listener\n        unsubscribeFromSnapshot();\n      }\n      // user is not signed in, so userAuth will be null\n      else {\n        setCurrentUser(null);\n        setUserData(null);\n      }\n    });\n\n    return () => {\n      unsubscribeFromAuth();\n    };\n  });\n  console.log(currentUser);\n  console.log(userData);\n  return { userData, currentUser };\n};\n"]},"metadata":{},"sourceType":"module"}